{"code":"!function(t){var e={};function r(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var n in t)r.d(o,n,function(e){return t[e]}.bind(null,n));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=4)}([function(t,e,r){const{createResponseType:o}=r(10),n=o(\"application/json; charset=utf-8\");t.exports={json:n}},function(t,e){t.exports={Router:({base:t=\"\",routes:e=[]}={})=>({__proto__:new Proxy({},{get:(r,o,n)=>(r,...s)=>e.push([o.toUpperCase(),RegExp(`^${(t+r).replace(/(\\/?)\\*/g,\"($1.*)?\").replace(/\\/$/,\"\").replace(/:(\\w+)(\\?)?(\\.)?/g,\"$2(?<$1>[^/]+)$2$3\").replace(/\\.(?=[\\w(])/,\"\\\\.\")}/*$`),s])&&n}),routes:e,async handle(t,...r){let o,n,s=new URL(t.url);for(var[a,i,h]of(t.query=Object.fromEntries(s.searchParams),e))if((a===t.method||\"ALL\"===a)&&(n=s.pathname.match(i)))for(var c of(t.params=n.groups,h))if(void 0!==(o=await c(t.proxy||t,...r)))return o}})}},function(t,e,r){t.exports={...r(3),...r(0),...r(11),...r(12),...r(13)}},function(t,e,r){const{json:o}=r(0);t.exports={error:(t=500,e=\"Internal Server Error.\")=>o({...\"object\"==typeof e?e:{status:t,error:e}},{status:t})}},function(t,e,r){\"use strict\";r.r(e);var o=r(1);const{json:n}=r(5),{URL:s}=r(18),{handleCors:a,wrapCorsHeader:i}=r(26),h=r(27),c=Object(o.Router)();c.options(\"/*\",a({methods:\"POST\",maxAge:86400})),c.options(\"/*\",a({methods:\"GET\",maxAge:86400}));const l=\"Y0uf0undm3T0k3nS3cr3t\";var u=\"v0\";async function p(t){const{headers:e}=t,r=e.get(\"content-type\")||\"\";return r.includes(\"application/json\")?JSON.stringify(await t.json()):(r.includes(\"application/text\")||r.includes(\"text/html\"),t.text())}c.post(\"/*\",async t=>{console.log(\"1.0.12\");try{let{params:o,query:s,url:a}=t,h=a.split(\"/\");const c=h[0],l=h[2];if(console.log(\"protocol \"+c),console.log(\"domain \"+l),h.length<3)return\"prod\"===ENVIRONMENT?i(n({name:\"yfm-api\",version:\"1.0.12\",env:\"prod\"})):i(n({name:\"yfm-api\",version:\"1.0.12\",env:\"dev\"}));u=h[3];const f=h[4];if(console.log(\"version \"+u),console.log(\"type \"+f),\"v0\"!=u)return i(n({error:\"requested version not available, please us v0\",version:\"1.0.12\"}));if(\"signer\"==f){var e=JSON.stringify(await t.json());console.log(\"json: \"+e);const r={body:e,method:\"POST\",headers:{\"content-type\":\"application/json;charset=UTF-8\"}};try{const t=await fetch(\"https://yfm-signer.tech41.workers.dev/signer\",r);console.log(t);const e=await p(t);return console.log(e),i(new Response(e))}catch(t){return console.log(t),i(n({error:t.message}))}}if(\"person\"==f){const o=h[6];console.log(\"cmd \"+o);e=JSON.stringify(await t.json());console.log(\"json: \"+e);var r=t.headers.get(\"Authorization\");console.log(\"token: \"+r);const s={body:e,method:\"POST\",headers:{\"content-type\":\"application/json;charset=UTF-8\",Authorization:r}};try{const t=await fetch(\"https://yfm_dbservice.tech41.workers.dev/post\",s);console.log(t);const e=await p(t);return console.log(e),i(n({status:e}))}catch(t){return console.log(t),i(n({error:t.message}))}}return i(\"version\"==f?n({name:\"Youfoundme API\",version:\"1.0.12\",majorVersion:u}):n({error:\"unknown type\",type:f,version:\"1.0.12\",majorVersion:u}))}catch(t){return i(n({error:t}))}}),c.get(\"/*\",async t=>{try{let{params:m,query:d,url:g}=t,y=g.split(\"/\");y[0],y[2];if(y.length<5)return\"prod\"===ENVIRONMENT?i(n({name:\"yfm-api\",version:\"1.0.12\",env:\"prod\"})):i(n({name:\"yfm-api\",version:\"1.0.12\",env:\"dev\"}));u=y[3];const v=y[4];if(console.log(\"version 1.0.12\"),console.log(\"type \"+v),\"v0\"!=u)return i(n({error:\"requested version not available, please us v0\",version:\"1.0.12\"}));if(\"person\"==v){const r=y[5],o=y[6];var e=t.headers.get(\"Authorization\");return console.log(\"token: \"+e),fetch(\"https://yfm_dbservice.tech41.workers.dev/\"+r+\"/\"+o,{headers:{\"content-type\":\"application/json;charset=UTF-8\",Authorization:e}})}if(\"confirm\"==v){const t=y[5];console.log(\"taskHash: \"+t);var r=JSON.parse(await KV_TOKEN.get(t));console.log(\"task: \"+r);const e=\"https://yfm_dbservice.tech41.workers.dev/perm/set/\"+r.from+\"/\"+r.to+\"?override=true\";return await fetch(e),console.log(\"first done\"),e=\"https://yfm_dbservice.tech41.workers.dev/perm/set/\"+r.to+\"/\"+r.from+\"?override=true\",await fetch(e),console.log(\"seccond done\"),Response.redirect(\"http://localhost:3000/#/message/1/?did=did:yfm:\"+r.to,307)}if(\"connect\"==v){const t=y[5],e=y[6],h=y[7],l=y[8];console.log(\"from: \"+t),console.log(\"to: \"+e),console.log(\"msg: \"+l);try{const u=\"https://yfm_dbservice.tech41.workers.dev/get/\"+e+\"?override=true\",m=await fetch(u,{headers:{\"content-type\":\"application/json;charset=UTF-8\"}});var o=JSON.parse(await p(m)).person,s=o.email,a=o.username,c=(r={from:t,to:e,permission:\"CONTACT\"},JSON.stringify(r));const d=(new TextEncoder).encode(c),g=btoa(await crypto.subtle.digest({name:\"SHA-256\"},d)),y=86400;await KV_TOKEN.put(g,c,{expirationTtl:y});console.log(\"magic set\"+g);const v=\"https://yfm_emailer.tech41.workers.dev/connect/\"+s+\"/\"+g+\"/\"+a+\"/\"+h+\"/\"+l;console.log(v);const w=await fetch(v,{headers:{\"content-type\":\"application/json;charset=UTF-8\"}});var f=JSON.parse(await p(w));return i(n({emailDone:f}))}catch(t){return i(n({error:t}))}return i(n({status:\"ok\"}))}if(\"email\"==v){const t=y[5],e=y[6];return fetch(\"https://yfm_emailer.tech41.workers.dev/\"+t+\"/\"+e)}if(\"sms\"==v){const t=y[5],e=y[6];return fetch(\"https://yfm_emailer.tech41.workers.dev/\"+t+\"/\"+e)}if(\"perm2\"==v){e=t.headers.get(\"Authorization\");console.log(\"JWT token: \"+e);const r=y[5],o=y[6],n=y[7];return fetch(\"https://yfm_dbservice.tech41.workers.dev/perm/\"+r+\"/\"+o+\"/\"+n,{headers:{\"content-type\":\"application/json;charset=UTF-8\",Authorization:e}})}if(\"token\"==v){const t=y[5];if(\"validate\"==t){const t=y[6];if(console.log(\"token to validate: \"+t),\"\"==t)return i(n({verified:\"no token supplied\"}));try{const e=await h.verify(t,l);if(console.log(\"verified: \"+e),e){const e=await h.decode(t);console.log(\"sub: \"+e.sub),console.log(\"name: \"+e.name),console.log(\"session: \"+e.session),console.log(\"exp: \"+e.exp)}return i(n({verified:e}))}catch(t){return console.log(\"verified: \"+t),i(n({verified:\"not a valid token\"}))}return i(n({verified:\"unknown\"}))}if(\"set\"==t){const t=y[6],e=y[7],r=y[8];if(\"\"==r)return i(n({error:\"no session supplied\"}));if(\"\"==e)return i(n({error:\"no did supplied\"}));if(\"\"==t)return i(n({error:\"no username supplied\"}));const o=await h.sign({sub:e,name:t,admin:\"false\",session:r,exp:Math.floor(Date.now()/1e3)+86400},l);return console.log(\"token given: \"+o),i(new Response(o))}}return\"prod\"===ENVIRONMENT?i(n({name:\"yfm-api\",version:\"1.0.12\",env:\"prod\"})):i(n({name:\"yfm-api\",version:\"1.0.12\",env:\"dev\"}))}catch(t){return i(n({error:t}))}}),c.all(\"*\",()=>new Response(\"404, not found!\",{status:404})),addEventListener(\"fetch\",async t=>{t.respondWith(c.handle(t.request))})},function(t,e,r){t.exports={...r(6),...r(2),...r(14),...r(16)}},function(t,e,r){t.exports={...r(7),...r(8),...r(9)}},function(t,e){t.exports={withContent:async t=>{let e=t.headers.get(\"content-type\");t.content=void 0;try{e&&e.includes(\"application/json\")&&(t.content=await t.json())}catch(t){}}}},function(t,e){t.exports={withCookies:t=>{t.cookies={};try{t.cookies=(t.headers.get(\"Cookie\")||\"\").split(/;\\s*/).map(t=>t.split(\"=\")).reduce((t,[e,r])=>(t[e]=r,t),{})}catch(t){}}}},function(t,e){t.exports={withParams:t=>{for(const e in t.params||{})t[e]=t.params[e]}}},function(t,e){t.exports={createResponseType:(t=\"text/plain; charset=utf-8\")=>(e,r={})=>{const{headers:o={},...n}=r;return\"object\"==typeof e?new Response(JSON.stringify(e),{headers:{\"Content-Type\":t,...o},...n}):new Response(e,r)}}},function(t,e,r){const{error:o}=r(3);t.exports={missing:(t=\"Not found.\")=>o(404,t)}},function(t,e,r){const{json:o}=r(0);t.exports={status:(t,e)=>e?o({...\"object\"==typeof e?e:{status:t,message:e}},{status:t}):new Response(null,{status:t})}},function(t,e){t.exports={text:(t,e={})=>new Response(t,e)}},function(t,e,r){t.exports={...r(15)}},function(t,e,r){\"use strict\";const{Router:o}=r(1),{error:n}=r(2);t.exports={ThrowableRouter:(t={})=>{const{stack:e=!1}=t;return new Proxy(o(t),{get:(t,r)=>(...o)=>\"handle\"===r?t[r](...o).catch(t=>n(t.status||500,{status:t.status||500,error:t.message,stack:e&&t.stack||void 0})):t[r](...o)})}}},function(t,e,r){t.exports={...r(17)}},function(t,e){class r extends Error{constructor(t=500,e=\"Internal Error.\"){super(e),this.name=\"StatusError\",this.status=t}}t.exports={StatusError:r}},function(t,e,r){\"use strict\";var o=r(19),n=r(22);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=w,e.resolve=function(t,e){return w(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?w(t,!1,!0).resolveObject(e):e},e.format=function(t){n.isString(t)&&(t=w(t));return t instanceof s?t.format():s.prototype.format.call(t)},e.Url=s;var a=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,h=/^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,c=[\"{\",\"}\",\"|\",\"\\\\\",\"^\",\"`\"].concat([\"<\",\">\",'\"',\"`\",\" \",\"\\r\",\"\\n\",\"\\t\"]),l=[\"'\"].concat(c),u=[\"%\",\"/\",\"?\",\";\",\"#\"].concat(l),p=[\"/\",\"?\",\"#\"],f=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,d={javascript:!0,\"javascript:\":!0},g={javascript:!0,\"javascript:\":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,\"http:\":!0,\"https:\":!0,\"ftp:\":!0,\"gopher:\":!0,\"file:\":!0},v=r(23);function w(t,e,r){if(t&&n.isObject(t)&&t instanceof s)return t;var o=new s;return o.parse(t,e,r),o}s.prototype.parse=function(t,e,r){if(!n.isString(t))throw new TypeError(\"Parameter 'url' must be a string, not \"+typeof t);var s=t.indexOf(\"?\"),i=-1!==s&&s<t.indexOf(\"#\")?\"?\":\"#\",c=t.split(i);c[0]=c[0].replace(/\\\\/g,\"/\");var w=t=c.join(i);if(w=w.trim(),!r&&1===t.split(\"#\").length){var b=h.exec(w);if(b)return this.path=w,this.href=w,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search=\"\",this.query={}),this}var A=a.exec(w);if(A){var j=(A=A[0]).toLowerCase();this.protocol=j,w=w.substr(A.length)}if(r||A||w.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)){var x=\"//\"===w.substr(0,2);!x||A&&g[A]||(w=w.substr(2),this.slashes=!0)}if(!g[A]&&(x||A&&!y[A])){for(var O,C,S=-1,E=0;E<p.length;E++){-1!==(k=w.indexOf(p[E]))&&(-1===S||k<S)&&(S=k)}-1!==(C=-1===S?w.lastIndexOf(\"@\"):w.lastIndexOf(\"@\",S))&&(O=w.slice(0,C),w=w.slice(C+1),this.auth=decodeURIComponent(O)),S=-1;for(E=0;E<u.length;E++){var k;-1!==(k=w.indexOf(u[E]))&&(-1===S||k<S)&&(S=k)}-1===S&&(S=w.length),this.host=w.slice(0,S),w=w.slice(S),this.parseHost(),this.hostname=this.hostname||\"\";var T=\"[\"===this.hostname[0]&&\"]\"===this.hostname[this.hostname.length-1];if(!T)for(var N=this.hostname.split(/\\./),_=(E=0,N.length);E<_;E++){var R=N[E];if(R&&!R.match(f)){for(var U=\"\",I=0,P=R.length;I<P;I++)R.charCodeAt(I)>127?U+=\"x\":U+=R[I];if(!U.match(f)){var q=N.slice(0,E),H=N.slice(E+1),M=R.match(m);M&&(q.push(M[1]),H.unshift(M[2])),H.length&&(w=\"/\"+H.join(\".\")+w),this.hostname=q.join(\".\");break}}}this.hostname.length>255?this.hostname=\"\":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=o.toASCII(this.hostname));var $=this.port?\":\"+this.port:\"\",D=this.hostname||\"\";this.host=D+$,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),\"/\"!==w[0]&&(w=\"/\"+w))}if(!d[j])for(E=0,_=l.length;E<_;E++){var F=l[E];if(-1!==w.indexOf(F)){var J=encodeURIComponent(F);J===F&&(J=escape(F)),w=w.split(F).join(J)}}var z=w.indexOf(\"#\");-1!==z&&(this.hash=w.substr(z),w=w.slice(0,z));var L=w.indexOf(\"?\");if(-1!==L?(this.search=w.substr(L),this.query=w.substr(L+1),e&&(this.query=v.parse(this.query)),w=w.slice(0,L)):e&&(this.search=\"\",this.query={}),w&&(this.pathname=w),y[j]&&this.hostname&&!this.pathname&&(this.pathname=\"/\"),this.pathname||this.search){$=this.pathname||\"\";var K=this.search||\"\";this.path=$+K}return this.href=this.format(),this},s.prototype.format=function(){var t=this.auth||\"\";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,\":\"),t+=\"@\");var e=this.protocol||\"\",r=this.pathname||\"\",o=this.hash||\"\",s=!1,a=\"\";this.host?s=t+this.host:this.hostname&&(s=t+(-1===this.hostname.indexOf(\":\")?this.hostname:\"[\"+this.hostname+\"]\"),this.port&&(s+=\":\"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(a=v.stringify(this.query));var i=this.search||a&&\"?\"+a||\"\";return e&&\":\"!==e.substr(-1)&&(e+=\":\"),this.slashes||(!e||y[e])&&!1!==s?(s=\"//\"+(s||\"\"),r&&\"/\"!==r.charAt(0)&&(r=\"/\"+r)):s||(s=\"\"),o&&\"#\"!==o.charAt(0)&&(o=\"#\"+o),i&&\"?\"!==i.charAt(0)&&(i=\"?\"+i),e+s+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(i=i.replace(\"#\",\"%23\"))+o},s.prototype.resolve=function(t){return this.resolveObject(w(t,!1,!0)).format()},s.prototype.resolveObject=function(t){if(n.isString(t)){var e=new s;e.parse(t,!1,!0),t=e}for(var r=new s,o=Object.keys(this),a=0;a<o.length;a++){var i=o[a];r[i]=this[i]}if(r.hash=t.hash,\"\"===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),c=0;c<h.length;c++){var l=h[c];\"protocol\"!==l&&(r[l]=t[l])}return y[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname=\"/\"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!y[t.protocol]){for(var u=Object.keys(t),p=0;p<u.length;p++){var f=u[p];r[f]=t[f]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||g[t.protocol])r.pathname=t.pathname;else{for(var m=(t.pathname||\"\").split(\"/\");m.length&&!(t.host=m.shift()););t.host||(t.host=\"\"),t.hostname||(t.hostname=\"\"),\"\"!==m[0]&&m.unshift(\"\"),m.length<2&&m.unshift(\"\"),r.pathname=m.join(\"/\")}if(r.search=t.search,r.query=t.query,r.host=t.host||\"\",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var d=r.pathname||\"\",v=r.search||\"\";r.path=d+v}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var w=r.pathname&&\"/\"===r.pathname.charAt(0),b=t.host||t.pathname&&\"/\"===t.pathname.charAt(0),A=b||w||r.host&&t.pathname,j=A,x=r.pathname&&r.pathname.split(\"/\")||[],O=(m=t.pathname&&t.pathname.split(\"/\")||[],r.protocol&&!y[r.protocol]);if(O&&(r.hostname=\"\",r.port=null,r.host&&(\"\"===x[0]?x[0]=r.host:x.unshift(r.host)),r.host=\"\",t.protocol&&(t.hostname=null,t.port=null,t.host&&(\"\"===m[0]?m[0]=t.host:m.unshift(t.host)),t.host=null),A=A&&(\"\"===m[0]||\"\"===x[0])),b)r.host=t.host||\"\"===t.host?t.host:r.host,r.hostname=t.hostname||\"\"===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,x=m;else if(m.length)x||(x=[]),x.pop(),x=x.concat(m),r.search=t.search,r.query=t.query;else if(!n.isNullOrUndefined(t.search)){if(O)r.hostname=r.host=x.shift(),(T=!!(r.host&&r.host.indexOf(\"@\")>0)&&r.host.split(\"@\"))&&(r.auth=T.shift(),r.host=r.hostname=T.shift());return r.search=t.search,r.query=t.query,n.isNull(r.pathname)&&n.isNull(r.search)||(r.path=(r.pathname?r.pathname:\"\")+(r.search?r.search:\"\")),r.href=r.format(),r}if(!x.length)return r.pathname=null,r.search?r.path=\"/\"+r.search:r.path=null,r.href=r.format(),r;for(var C=x.slice(-1)[0],S=(r.host||t.host||x.length>1)&&(\".\"===C||\"..\"===C)||\"\"===C,E=0,k=x.length;k>=0;k--)\".\"===(C=x[k])?x.splice(k,1):\"..\"===C?(x.splice(k,1),E++):E&&(x.splice(k,1),E--);if(!A&&!j)for(;E--;E)x.unshift(\"..\");!A||\"\"===x[0]||x[0]&&\"/\"===x[0].charAt(0)||x.unshift(\"\"),S&&\"/\"!==x.join(\"/\").substr(-1)&&x.push(\"\");var T,N=\"\"===x[0]||x[0]&&\"/\"===x[0].charAt(0);O&&(r.hostname=r.host=N?\"\":x.length?x.shift():\"\",(T=!!(r.host&&r.host.indexOf(\"@\")>0)&&r.host.split(\"@\"))&&(r.auth=T.shift(),r.host=r.hostname=T.shift()));return(A=A||r.host&&x.length)&&!N&&x.unshift(\"\"),x.length?r.pathname=x.join(\"/\"):(r.pathname=null,r.path=null),n.isNull(r.pathname)&&n.isNull(r.search)||(r.path=(r.pathname?r.pathname:\"\")+(r.search?r.search:\"\")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},s.prototype.parseHost=function(){var t=this.host,e=i.exec(t);e&&(\":\"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,r){(function(t,o){var n;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(s){e&&e.nodeType,t&&t.nodeType;var a=\"object\"==typeof o&&o;a.global!==a&&a.window!==a&&a.self;var i,h=2147483647,c=/^xn--/,l=/[^\\x20-\\x7E]/,u=/[\\x2E\\u3002\\uFF0E\\uFF61]/g,p={overflow:\"Overflow: input needs wider integers to process\",\"not-basic\":\"Illegal input >= 0x80 (not a basic code point)\",\"invalid-input\":\"Invalid input\"},f=Math.floor,m=String.fromCharCode;function d(t){throw new RangeError(p[t])}function g(t,e){for(var r=t.length,o=[];r--;)o[r]=e(t[r]);return o}function y(t,e){var r=t.split(\"@\"),o=\"\";return r.length>1&&(o=r[0]+\"@\",t=r[1]),o+g((t=t.replace(u,\".\")).split(\".\"),e).join(\".\")}function v(t){for(var e,r,o=[],n=0,s=t.length;n<s;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<s?56320==(64512&(r=t.charCodeAt(n++)))?o.push(((1023&e)<<10)+(1023&r)+65536):(o.push(e),n--):o.push(e);return o}function w(t){return g(t,(function(t){var e=\"\";return t>65535&&(e+=m((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=m(t)})).join(\"\")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function A(t,e,r){var o=0;for(t=r?f(t/700):t>>1,t+=f(t/e);t>455;o+=36)t=f(t/35);return f(o+36*t/(t+38))}function j(t){var e,r,o,n,s,a,i,c,l,u,p,m=[],g=t.length,y=0,v=128,b=72;for((r=t.lastIndexOf(\"-\"))<0&&(r=0),o=0;o<r;++o)t.charCodeAt(o)>=128&&d(\"not-basic\"),m.push(t.charCodeAt(o));for(n=r>0?r+1:0;n<g;){for(s=y,a=1,i=36;n>=g&&d(\"invalid-input\"),((c=(p=t.charCodeAt(n++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:36)>=36||c>f((h-y)/a))&&d(\"overflow\"),y+=c*a,!(c<(l=i<=b?1:i>=b+26?26:i-b));i+=36)a>f(h/(u=36-l))&&d(\"overflow\"),a*=u;b=A(y-s,e=m.length+1,0==s),f(y/e)>h-v&&d(\"overflow\"),v+=f(y/e),y%=e,m.splice(y++,0,v)}return w(m)}function x(t){var e,r,o,n,s,a,i,c,l,u,p,g,y,w,j,x=[];for(g=(t=v(t)).length,e=128,r=0,s=72,a=0;a<g;++a)(p=t[a])<128&&x.push(m(p));for(o=n=x.length,n&&x.push(\"-\");o<g;){for(i=h,a=0;a<g;++a)(p=t[a])>=e&&p<i&&(i=p);for(i-e>f((h-r)/(y=o+1))&&d(\"overflow\"),r+=(i-e)*y,e=i,a=0;a<g;++a)if((p=t[a])<e&&++r>h&&d(\"overflow\"),p==e){for(c=r,l=36;!(c<(u=l<=s?1:l>=s+26?26:l-s));l+=36)j=c-u,w=36-u,x.push(m(b(u+j%w,0))),c=f(j/w);x.push(m(b(c,0))),s=A(r,y,o==n),r=0,++o}++r,++e}return x.join(\"\")}i={version:\"1.4.1\",ucs2:{decode:v,encode:w},decode:j,encode:x,toASCII:function(t){return y(t,(function(t){return l.test(t)?\"xn--\"+x(t):t}))},toUnicode:function(t){return y(t,(function(t){return c.test(t)?j(t.slice(4).toLowerCase()):t}))}},void 0===(n=function(){return i}.call(e,r,e,t))||(t.exports=n)}()}).call(this,r(20)(t),r(21))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,\"loaded\",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,\"id\",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var r;r=function(){return this}();try{r=r||new Function(\"return this\")()}catch(t){\"object\"==typeof window&&(r=window)}t.exports=r},function(t,e,r){\"use strict\";t.exports={isString:function(t){return\"string\"==typeof t},isObject:function(t){return\"object\"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,r){\"use strict\";e.decode=e.parse=r(24),e.encode=e.stringify=r(25)},function(t,e,r){\"use strict\";function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,s){e=e||\"&\",r=r||\"=\";var a={};if(\"string\"!=typeof t||0===t.length)return a;var i=/\\+/g;t=t.split(e);var h=1e3;s&&\"number\"==typeof s.maxKeys&&(h=s.maxKeys);var c=t.length;h>0&&c>h&&(c=h);for(var l=0;l<c;++l){var u,p,f,m,d=t[l].replace(i,\"%20\"),g=d.indexOf(r);g>=0?(u=d.substr(0,g),p=d.substr(g+1)):(u=d,p=\"\"),f=decodeURIComponent(u),m=decodeURIComponent(p),o(a,f)?n(a[f])?a[f].push(m):a[f]=[a[f],m]:a[f]=m}return a};var n=Array.isArray||function(t){return\"[object Array]\"===Object.prototype.toString.call(t)}},function(t,e,r){\"use strict\";var o=function(t){switch(typeof t){case\"string\":return t;case\"boolean\":return t?\"true\":\"false\";case\"number\":return isFinite(t)?t:\"\";default:return\"\"}};t.exports=function(t,e,r,i){return e=e||\"&\",r=r||\"=\",null===t&&(t=void 0),\"object\"==typeof t?s(a(t),(function(a){var i=encodeURIComponent(o(a))+r;return n(t[a])?s(t[a],(function(t){return i+encodeURIComponent(o(t))})).join(e):i+encodeURIComponent(o(t[a]))})).join(e):i?encodeURIComponent(o(i))+r+encodeURIComponent(o(t)):\"\"};var n=Array.isArray||function(t){return\"[object Array]\"===Object.prototype.toString.call(t)};function s(t,e){if(t.map)return t.map(e);for(var r=[],o=0;o<t.length;o++)r.push(e(t[o],o));return r}var a=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},function(t,e,r){\"use strict\";r.r(e),r.d(e,\"handleCors\",(function(){return o})),r.d(e,\"wrapCorsHeader\",(function(){return n}));const o=(t={})=>e=>{const{origin:r=\"*\",methods:o=\"GET, POST, PATCH, DELETE\",headers:n=\"authorization, referer, origin, content-type\",maxAge:s=null,allowCredentials:a=!0}=t;if(null!==e.headers.get(\"Origin\")&&null!==e.headers.get(\"Access-Control-Request-Method\")){const t={\"Access-Control-Allow-Origin\":r,\"Access-Control-Allow-Methods\":o,\"Access-Control-Allow-Headers\":n};return a&&(t[\"Access-Control-Allow-Credentials\"]=\"true\"),s&&(t[\"Access-Control-Max-Age\"]=s),new Response(null,{status:204,headers:t})}return new Response(null,{headers:{Allow:o+\", HEAD, OPTIONS\"}})},n=(t,e={})=>{const{origin:r=\"*\"}=e;return t.headers.set(\"Access-Control-Allow-Origin\",r),t}},function(t,e){class r{static parse(t){return new Uint8Array(Array.prototype.map.call(atob(t.replace(/-/g,\"+\").replace(/_/g,\"/\").replace(/\\s/g,\"\")),t=>t.charCodeAt(0)))}static stringify(t){return btoa(String.fromCharCode.apply(0,t)).replace(/=/g,\"\").replace(/\\+/g,\"-\").replace(/\\//g,\"_\")}}t.exports=new class{constructor(){if(!crypto||!crypto.subtle)throw new Error(\"Crypto not supported!\");this.algorithms={ES256:{name:\"ECDSA\",namedCurve:\"P-256\",hash:{name:\"SHA-256\"}},ES384:{name:\"ECDSA\",namedCurve:\"P-384\",hash:{name:\"SHA-384\"}},ES512:{name:\"ECDSA\",namedCurve:\"P-512\",hash:{name:\"SHA-512\"}},HS256:{name:\"HMAC\",hash:{name:\"SHA-256\"}},HS384:{name:\"HMAC\",hash:{name:\"SHA-384\"}},HS512:{name:\"HMAC\",hash:{name:\"SHA-512\"}}}}_utf8ToUint8Array(t){return r.parse(btoa(unescape(encodeURIComponent(t))))}_str2ab(t){const e=new ArrayBuffer(t.length),r=new Uint8Array(e);for(let e=0,o=t.length;e<o;e++)r[e]=t.charCodeAt(e);return e}_decodePayload(t){switch(t.length%4){case 0:break;case 2:t+=\"==\";break;case 3:t+=\"=\";break;default:throw new Error(\"Illegal base64url string!\")}try{return JSON.parse(decodeURIComponent(escape(atob(t))))}catch{return null}}async sign(t,e,o={algorithm:\"HS256\"}){if(\"string\"==typeof o&&(o={algorithm:o}),null===t||\"object\"!=typeof t)throw new Error(\"payload must be an object\");if(\"string\"!=typeof e)throw new Error(\"secret must be a string\");if(\"string\"!=typeof o.algorithm)throw new Error(\"options.algorithm must be a string\");const n=this.algorithms[o.algorithm];if(!n)throw new Error(\"algorithm not found\");t.iat=Math.floor(Date.now()/1e3);const s=JSON.stringify(t),a=`${r.stringify(this._utf8ToUint8Array(JSON.stringify({alg:o.algorithm,kid:o.keyid})))}.${r.stringify(this._utf8ToUint8Array(s))}`;let i,h=\"raw\";e.startsWith(\"-----BEGIN\")?(h=\"pkcs8\",i=this._str2ab(atob(e.replace(/-----BEGIN.*?-----/g,\"\").replace(/-----END.*?-----/g,\"\").replace(/\\s/g,\"\")))):i=this._utf8ToUint8Array(e);const c=await crypto.subtle.importKey(h,i,n,!1,[\"sign\"]),l=await crypto.subtle.sign(n,c,this._utf8ToUint8Array(a));return`${a}.${r.stringify(new Uint8Array(l))}`}async verify(t,e,o={algorithm:\"HS256\"}){if(\"string\"==typeof o&&(o={algorithm:o}),\"string\"!=typeof t)throw new Error(\"token must be a string\");if(\"string\"!=typeof e)throw new Error(\"secret must be a string\");if(\"string\"!=typeof o.algorithm)throw new Error(\"options.algorithm must be a string\");const n=t.split(\".\");if(3!==n.length)throw new Error(\"token must consist of 3 parts\");const s=this.algorithms[o.algorithm];if(!s)throw new Error(\"algorithm not found\");const a=this.decode(t);if(a.nbf&&a.nbf>=Math.floor(Date.now()/1e3))return!1;if(a.exp&&a.exp<Math.floor(Date.now()/1e3))return!1;let i,h=\"raw\";e.startsWith(\"-----BEGIN\")?(h=\"pkcs8\",i=this._str2ab(atob(e.replace(/-----BEGIN.*?-----/g,\"\").replace(/-----END.*?-----/g,\"\").replace(/\\s/g,\"\")))):i=this._utf8ToUint8Array(e);const c=await crypto.subtle.importKey(h,i,s,!1,[\"sign\"]),l=await crypto.subtle.sign(s,c,this._utf8ToUint8Array(n.slice(0,2).join(\".\")));return r.stringify(new Uint8Array(l))===n[2]}decode(t){return this._decodePayload(t.split(\".\")[1].replace(/-/g,\"+\").replace(/_/g,\"/\"))}}}]);","extractedComments":[]}