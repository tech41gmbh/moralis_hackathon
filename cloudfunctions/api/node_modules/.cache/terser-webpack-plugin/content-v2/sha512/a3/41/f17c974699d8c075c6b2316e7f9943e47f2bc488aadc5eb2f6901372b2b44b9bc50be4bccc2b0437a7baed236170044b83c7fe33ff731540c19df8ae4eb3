{"code":"!function(t){var e={};function o(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,\"a\",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p=\"\",o(o.s=4)}([function(t,e,o){const{createResponseType:r}=o(10),n=r(\"application/json; charset=utf-8\");t.exports={json:n}},function(t,e){t.exports={Router:({base:t=\"\",routes:e=[]}={})=>({__proto__:new Proxy({},{get:(o,r,n)=>(o,...s)=>e.push([r.toUpperCase(),RegExp(`^${(t+o).replace(/(\\/?)\\*/g,\"($1.*)?\").replace(/\\/$/,\"\").replace(/:(\\w+)(\\?)?(\\.)?/g,\"$2(?<$1>[^/]+)$2$3\").replace(/\\.(?=[\\w(])/,\"\\\\.\")}/*$`),s])&&n}),routes:e,async handle(t,...o){let r,n,s=new URL(t.url);for(var[a,i,h]of(t.query=Object.fromEntries(s.searchParams),e))if((a===t.method||\"ALL\"===a)&&(n=s.pathname.match(i)))for(var c of(t.params=n.groups,h))if(void 0!==(r=await c(t.proxy||t,...o)))return r}})}},function(t,e,o){t.exports={...o(3),...o(0),...o(11),...o(12),...o(13)}},function(t,e,o){const{json:r}=o(0);t.exports={error:(t=500,e=\"Internal Server Error.\")=>r({...\"object\"==typeof e?e:{status:t,error:e}},{status:t})}},function(t,e,o){\"use strict\";o.r(e);var r=o(1);const{json:n}=o(5),{URL:s}=o(18),{handleCors:a,wrapCorsHeader:i}=o(26),h=o(27),c=Object(r.Router)();c.options(\"/*\",a({methods:\"POST\",maxAge:86400})),c.options(\"/*\",a({methods:\"GET\",maxAge:86400}));const l=\"Y0uf0undm3T0k3nS3cr3t\";var u=\"v0\",p=\"https://yfm_db.yfm.workers.dev/\",f=\"https://sign.yfm.workers.dev/\",m=\"https://yfm_notify.yfm.workers.dev/\",d=\"https://app.youfoundme.io/\";async function g(t){const{headers:e}=t,o=e.get(\"content-type\")||\"\";return o.includes(\"application/json\")?JSON.stringify(await t.json()):(o.includes(\"application/text\")||o.includes(\"text/html\"),t.text())}\"dev\"===ENVIRONMENT&&(p=\"https://yfm_db-dev.yfm.workers.dev/\",f=\"https://sign-dev.yfm.workers.dev/\",m=\"https://yfm_notify-dev.yfm.workers.dev/\",d=\"http://localhost:3000/\");c.post(\"/*\",async t=>{console.log(\"0.0.12\");try{let{params:r,query:s,url:a}=t,h=a.split(\"/\");const c=h[0],l=h[2];if(console.log(\"protocol \"+c),console.log(\"domain \"+l),h.length<3)return\"prod\"===ENVIRONMENT?i(n({name:\"yfm-api\",version:\"0.0.12\",env:\"prod\"})):i(n({name:\"yfm-api\",version:\"0.0.12\",env:\"dev\"}));u=h[3];const m=h[4];if(console.log(\"version \"+u),console.log(\"type \"+m),\"v0\"!=u)return i(n({error:\"requested version not available, please us v0\",version:\"0.0.12\"}));if(\"signer\"==m){var e=JSON.stringify(await t.json());console.log(\"json: \"+e);const o={body:e,method:\"POST\",headers:{\"content-type\":\"application/json;charset=UTF-8\"}};try{const t=await fetch(f+\"signer\",o);console.log(t);const e=await g(t);return console.log(e),i(new Response(e))}catch(t){return console.log(t),i(n({error:t.message}))}}if(\"person\"==m){const r=h[6];console.log(\"cmd \"+r);e=JSON.stringify(await t.json());console.log(\"json: \"+e);var o=t.headers.get(\"Authorization\");console.log(\"token: \"+o);const s={body:e,method:\"POST\",headers:{\"content-type\":\"application/json;charset=UTF-8\",Authorization:o}};try{const t=await fetch(p+\"post\",s);console.log(t);const e=await g(t);return console.log(e),i(n({status:e}))}catch(t){return console.log(t),i(n({error:t.message}))}}return\"version\"==m?\"prod\"===ENVIRONMENT?i(n({name:\"yfm-api\",version:\"0.0.12\",env:\"prod\"})):i(n({name:\"yfm-api\",version:\"0.0.12\",env:\"dev\"})):i(n({error:\"unknown type\",type:m,version:\"0.0.12\",majorVersion:u}))}catch(t){return i(n({error:t}))}}),c.get(\"/*\",async t=>{try{let{params:y,query:v,url:w}=t,b=w.split(\"/\");b[0],b[2];if(b.length<5)return\"prod\"===ENVIRONMENT?i(n({name:\"yfm-api\",version:\"0.0.12\",env:\"prod\"})):i(n({name:\"yfm-api\",version:\"0.0.12\",env:\"dev\"}));u=b[3];const A=b[4];if(console.log(\"version 0.0.12\"),console.log(\"type \"+A),\"v0\"!=u)return i(n({error:\"requested version not available, please us v0\",version:\"0.0.12\"}));if(\"person\"==A){const e=b[5],o=b[6];console.log(\"cmd: \"+e),console.log(\"param: \"+o),null==(f=t.headers.get(\"Authorization\"))&&(f=\"\"),console.log(\"token: \"+f);const r=p+e+\"/\"+o.toLowerCase();return console.log(\"requesting: \"+r),fetch(r,{headers:{\"content-type\":\"application/json;charset=UTF-8\",Authorization:f}})}if(\"search\"==A){const e=b[5],o=b[6];console.log(\"term: \"+e),console.log(\"startKey: \"+o),null==(f=t.headers.get(\"Authorization\"))&&(f=\"\"),console.log(\"token: \"+f);const r=p+\"search/\"+e+\"/\"+o;return console.log(\"requesting: \"+r),fetch(r,{headers:{\"content-type\":\"application/json;charset=UTF-8\",Authorization:f}})}if(\"message\"==A){const t=b[5];console.log(\"message: \"+t);const e=m+\"message/investor@youfoundme.io/\"+t;return console.log(\"u: \"+e),fetch(e)}if(\"confirm\"==A){const t=b[5];console.log(\"taskHash: \"+t);var e=JSON.parse(await KV_TOKEN.get(t));console.log(\"task: \"+e);const o=p+\"set/\"+e.from+\"/\"+e.to+\"?override=true\";return await fetch(o),console.log(\"first done\"),o=p+\"set/\"+e.to+\"/\"+e.from+\"?override=true\",await fetch(o),console.log(\"seccond done\"),Response.redirect(d+\"#/message/1/?did=did:yfm:\"+e.to,307)}if(\"connect\"==A){const t=b[5],h=b[6],l=b[7],u=b[8];console.log(\"from: \"+t),console.log(\"to: \"+h),console.log(\"msg: \"+u);try{const f=p+\"get/\"+h+\"?override=true\",d=await fetch(f,{headers:{\"content-type\":\"application/json;charset=UTF-8\"}});var o=JSON.parse(await g(d)).person,r=o.email,s=o.username,a=(e={from:t,to:h,permission:\"CONTACT\"},JSON.stringify(e));const y=(new TextEncoder).encode(a),v=btoa(await crypto.subtle.digest({name:\"SHA-256\"},y)),w=86400;await KV_TOKEN.put(v,a,{expirationTtl:w});console.log(\"magic set\"+v);const b=m+\"connect/\"+r+\"/\"+v+\"/\"+s+\"/\"+l+\"/\"+u;console.log(b);const A=await fetch(b,{headers:{\"content-type\":\"application/json;charset=UTF-8\"}});var c=JSON.parse(await g(A));return i(n({emailDone:c}))}catch(t){return i(n({error:t}))}return i(n({status:\"ok\"}))}if(\"email\"==A){const t=b[5],e=b[6];return fetch(m+t+\"/\"+e)}if(\"sms\"==A){const t=b[5],e=b[6];return fetch(m+t+\"/\"+e)}if(\"perm2\"==A){var f=t.headers.get(\"Authorization\");console.log(\"JWT token: \"+f);const e=b[5],o=b[6],r=b[7];return fetch(m+\"perm/\"+e+\"/\"+o+\"/\"+r,{headers:{\"content-type\":\"application/json;charset=UTF-8\",Authorization:f}})}if(\"token\"==A){const t=b[5];if(\"validate\"==t){const t=b[6];if(console.log(\"token to validate: \"+t),\"\"==t)return i(n({verified:\"no token supplied\"}));try{const e=await h.verify(t,l);if(console.log(\"verified: \"+e),e){const e=await h.decode(t);console.log(\"sub: \"+e.sub),console.log(\"name: \"+e.name),console.log(\"session: \"+e.session),console.log(\"exp: \"+e.exp)}return i(n({verified:e}))}catch(t){return console.log(\"verified: \"+t),i(n({verified:\"not a valid token\"}))}return i(n({verified:\"unknown\"}))}if(\"set\"==t){const t=b[5],e=b[6],o=b[7];if(\"\"==o)return i(n({error:\"no session supplied\"}));if(\"\"==e)return i(n({error:\"no did supplied\"}));if(\"\"==t)return i(n({error:\"no username supplied\"}));const r=await h.sign({sub:e,name:t,admin:\"false\",session:o,exp:Math.floor(Date.now()/1e3)+86400},l);return console.log(\"token given: \"+r),i(new Response(r))}}return\"prod\"===ENVIRONMENT?i(n({name:\"yfm-api\",version:\"0.0.12\",env:\"prod\"})):i(n({name:\"yfm-api\",version:\"0.0.12\",env:\"dev\"}))}catch(t){return i(n({error:t}))}}),c.all(\"*\",()=>new Response(\"404, not found!\",{status:404})),addEventListener(\"fetch\",async t=>{t.respondWith(c.handle(t.request))})},function(t,e,o){t.exports={...o(6),...o(2),...o(14),...o(16)}},function(t,e,o){t.exports={...o(7),...o(8),...o(9)}},function(t,e){t.exports={withContent:async t=>{let e=t.headers.get(\"content-type\");t.content=void 0;try{e&&e.includes(\"application/json\")&&(t.content=await t.json())}catch(t){}}}},function(t,e){t.exports={withCookies:t=>{t.cookies={};try{t.cookies=(t.headers.get(\"Cookie\")||\"\").split(/;\\s*/).map(t=>t.split(\"=\")).reduce((t,[e,o])=>(t[e]=o,t),{})}catch(t){}}}},function(t,e){t.exports={withParams:t=>{for(const e in t.params||{})t[e]=t.params[e]}}},function(t,e){t.exports={createResponseType:(t=\"text/plain; charset=utf-8\")=>(e,o={})=>{const{headers:r={},...n}=o;return\"object\"==typeof e?new Response(JSON.stringify(e),{headers:{\"Content-Type\":t,...r},...n}):new Response(e,o)}}},function(t,e,o){const{error:r}=o(3);t.exports={missing:(t=\"Not found.\")=>r(404,t)}},function(t,e,o){const{json:r}=o(0);t.exports={status:(t,e)=>e?r({...\"object\"==typeof e?e:{status:t,message:e}},{status:t}):new Response(null,{status:t})}},function(t,e){t.exports={text:(t,e={})=>new Response(t,e)}},function(t,e,o){t.exports={...o(15)}},function(t,e,o){\"use strict\";const{Router:r}=o(1),{error:n}=o(2);t.exports={ThrowableRouter:(t={})=>{const{stack:e=!1}=t;return new Proxy(r(t),{get:(t,o)=>(...r)=>\"handle\"===o?t[o](...r).catch(t=>n(t.status||500,{status:t.status||500,error:t.message,stack:e&&t.stack||void 0})):t[o](...r)})}}},function(t,e,o){t.exports={...o(17)}},function(t,e){class o extends Error{constructor(t=500,e=\"Internal Error.\"){super(e),this.name=\"StatusError\",this.status=t}}t.exports={StatusError:o}},function(t,e,o){\"use strict\";var r=o(19),n=o(22);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=w,e.resolve=function(t,e){return w(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?w(t,!1,!0).resolveObject(e):e},e.format=function(t){n.isString(t)&&(t=w(t));return t instanceof s?t.format():s.prototype.format.call(t)},e.Url=s;var a=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,h=/^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,c=[\"{\",\"}\",\"|\",\"\\\\\",\"^\",\"`\"].concat([\"<\",\">\",'\"',\"`\",\" \",\"\\r\",\"\\n\",\"\\t\"]),l=[\"'\"].concat(c),u=[\"%\",\"/\",\"?\",\";\",\"#\"].concat(l),p=[\"/\",\"?\",\"#\"],f=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,d={javascript:!0,\"javascript:\":!0},g={javascript:!0,\"javascript:\":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,\"http:\":!0,\"https:\":!0,\"ftp:\":!0,\"gopher:\":!0,\"file:\":!0},v=o(23);function w(t,e,o){if(t&&n.isObject(t)&&t instanceof s)return t;var r=new s;return r.parse(t,e,o),r}s.prototype.parse=function(t,e,o){if(!n.isString(t))throw new TypeError(\"Parameter 'url' must be a string, not \"+typeof t);var s=t.indexOf(\"?\"),i=-1!==s&&s<t.indexOf(\"#\")?\"?\":\"#\",c=t.split(i);c[0]=c[0].replace(/\\\\/g,\"/\");var w=t=c.join(i);if(w=w.trim(),!o&&1===t.split(\"#\").length){var b=h.exec(w);if(b)return this.path=w,this.href=w,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search=\"\",this.query={}),this}var A=a.exec(w);if(A){var j=(A=A[0]).toLowerCase();this.protocol=j,w=w.substr(A.length)}if(o||A||w.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)){var x=\"//\"===w.substr(0,2);!x||A&&g[A]||(w=w.substr(2),this.slashes=!0)}if(!g[A]&&(x||A&&!y[A])){for(var O,C,E=-1,S=0;S<p.length;S++){-1!==(k=w.indexOf(p[S]))&&(-1===E||k<E)&&(E=k)}-1!==(C=-1===E?w.lastIndexOf(\"@\"):w.lastIndexOf(\"@\",E))&&(O=w.slice(0,C),w=w.slice(C+1),this.auth=decodeURIComponent(O)),E=-1;for(S=0;S<u.length;S++){var k;-1!==(k=w.indexOf(u[S]))&&(-1===E||k<E)&&(E=k)}-1===E&&(E=w.length),this.host=w.slice(0,E),w=w.slice(E),this.parseHost(),this.hostname=this.hostname||\"\";var T=\"[\"===this.hostname[0]&&\"]\"===this.hostname[this.hostname.length-1];if(!T)for(var N=this.hostname.split(/\\./),R=(S=0,N.length);S<R;S++){var U=N[S];if(U&&!U.match(f)){for(var I=\"\",_=0,q=U.length;_<q;_++)U.charCodeAt(_)>127?I+=\"x\":I+=U[_];if(!I.match(f)){var P=N.slice(0,S),H=N.slice(S+1),M=U.match(m);M&&(P.push(M[1]),H.unshift(M[2])),H.length&&(w=\"/\"+H.join(\".\")+w),this.hostname=P.join(\".\");break}}}this.hostname.length>255?this.hostname=\"\":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=r.toASCII(this.hostname));var $=this.port?\":\"+this.port:\"\",F=this.hostname||\"\";this.host=F+$,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),\"/\"!==w[0]&&(w=\"/\"+w))}if(!d[j])for(S=0,R=l.length;S<R;S++){var z=l[S];if(-1!==w.indexOf(z)){var D=encodeURIComponent(z);D===z&&(D=escape(z)),w=w.split(z).join(D)}}var J=w.indexOf(\"#\");-1!==J&&(this.hash=w.substr(J),w=w.slice(0,J));var L=w.indexOf(\"?\");if(-1!==L?(this.search=w.substr(L),this.query=w.substr(L+1),e&&(this.query=v.parse(this.query)),w=w.slice(0,L)):e&&(this.search=\"\",this.query={}),w&&(this.pathname=w),y[j]&&this.hostname&&!this.pathname&&(this.pathname=\"/\"),this.pathname||this.search){$=this.pathname||\"\";var K=this.search||\"\";this.path=$+K}return this.href=this.format(),this},s.prototype.format=function(){var t=this.auth||\"\";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,\":\"),t+=\"@\");var e=this.protocol||\"\",o=this.pathname||\"\",r=this.hash||\"\",s=!1,a=\"\";this.host?s=t+this.host:this.hostname&&(s=t+(-1===this.hostname.indexOf(\":\")?this.hostname:\"[\"+this.hostname+\"]\"),this.port&&(s+=\":\"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(a=v.stringify(this.query));var i=this.search||a&&\"?\"+a||\"\";return e&&\":\"!==e.substr(-1)&&(e+=\":\"),this.slashes||(!e||y[e])&&!1!==s?(s=\"//\"+(s||\"\"),o&&\"/\"!==o.charAt(0)&&(o=\"/\"+o)):s||(s=\"\"),r&&\"#\"!==r.charAt(0)&&(r=\"#\"+r),i&&\"?\"!==i.charAt(0)&&(i=\"?\"+i),e+s+(o=o.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(i=i.replace(\"#\",\"%23\"))+r},s.prototype.resolve=function(t){return this.resolveObject(w(t,!1,!0)).format()},s.prototype.resolveObject=function(t){if(n.isString(t)){var e=new s;e.parse(t,!1,!0),t=e}for(var o=new s,r=Object.keys(this),a=0;a<r.length;a++){var i=r[a];o[i]=this[i]}if(o.hash=t.hash,\"\"===t.href)return o.href=o.format(),o;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),c=0;c<h.length;c++){var l=h[c];\"protocol\"!==l&&(o[l]=t[l])}return y[o.protocol]&&o.hostname&&!o.pathname&&(o.path=o.pathname=\"/\"),o.href=o.format(),o}if(t.protocol&&t.protocol!==o.protocol){if(!y[t.protocol]){for(var u=Object.keys(t),p=0;p<u.length;p++){var f=u[p];o[f]=t[f]}return o.href=o.format(),o}if(o.protocol=t.protocol,t.host||g[t.protocol])o.pathname=t.pathname;else{for(var m=(t.pathname||\"\").split(\"/\");m.length&&!(t.host=m.shift()););t.host||(t.host=\"\"),t.hostname||(t.hostname=\"\"),\"\"!==m[0]&&m.unshift(\"\"),m.length<2&&m.unshift(\"\"),o.pathname=m.join(\"/\")}if(o.search=t.search,o.query=t.query,o.host=t.host||\"\",o.auth=t.auth,o.hostname=t.hostname||t.host,o.port=t.port,o.pathname||o.search){var d=o.pathname||\"\",v=o.search||\"\";o.path=d+v}return o.slashes=o.slashes||t.slashes,o.href=o.format(),o}var w=o.pathname&&\"/\"===o.pathname.charAt(0),b=t.host||t.pathname&&\"/\"===t.pathname.charAt(0),A=b||w||o.host&&t.pathname,j=A,x=o.pathname&&o.pathname.split(\"/\")||[],O=(m=t.pathname&&t.pathname.split(\"/\")||[],o.protocol&&!y[o.protocol]);if(O&&(o.hostname=\"\",o.port=null,o.host&&(\"\"===x[0]?x[0]=o.host:x.unshift(o.host)),o.host=\"\",t.protocol&&(t.hostname=null,t.port=null,t.host&&(\"\"===m[0]?m[0]=t.host:m.unshift(t.host)),t.host=null),A=A&&(\"\"===m[0]||\"\"===x[0])),b)o.host=t.host||\"\"===t.host?t.host:o.host,o.hostname=t.hostname||\"\"===t.hostname?t.hostname:o.hostname,o.search=t.search,o.query=t.query,x=m;else if(m.length)x||(x=[]),x.pop(),x=x.concat(m),o.search=t.search,o.query=t.query;else if(!n.isNullOrUndefined(t.search)){if(O)o.hostname=o.host=x.shift(),(T=!!(o.host&&o.host.indexOf(\"@\")>0)&&o.host.split(\"@\"))&&(o.auth=T.shift(),o.host=o.hostname=T.shift());return o.search=t.search,o.query=t.query,n.isNull(o.pathname)&&n.isNull(o.search)||(o.path=(o.pathname?o.pathname:\"\")+(o.search?o.search:\"\")),o.href=o.format(),o}if(!x.length)return o.pathname=null,o.search?o.path=\"/\"+o.search:o.path=null,o.href=o.format(),o;for(var C=x.slice(-1)[0],E=(o.host||t.host||x.length>1)&&(\".\"===C||\"..\"===C)||\"\"===C,S=0,k=x.length;k>=0;k--)\".\"===(C=x[k])?x.splice(k,1):\"..\"===C?(x.splice(k,1),S++):S&&(x.splice(k,1),S--);if(!A&&!j)for(;S--;S)x.unshift(\"..\");!A||\"\"===x[0]||x[0]&&\"/\"===x[0].charAt(0)||x.unshift(\"\"),E&&\"/\"!==x.join(\"/\").substr(-1)&&x.push(\"\");var T,N=\"\"===x[0]||x[0]&&\"/\"===x[0].charAt(0);O&&(o.hostname=o.host=N?\"\":x.length?x.shift():\"\",(T=!!(o.host&&o.host.indexOf(\"@\")>0)&&o.host.split(\"@\"))&&(o.auth=T.shift(),o.host=o.hostname=T.shift()));return(A=A||o.host&&x.length)&&!N&&x.unshift(\"\"),x.length?o.pathname=x.join(\"/\"):(o.pathname=null,o.path=null),n.isNull(o.pathname)&&n.isNull(o.search)||(o.path=(o.pathname?o.pathname:\"\")+(o.search?o.search:\"\")),o.auth=t.auth||o.auth,o.slashes=o.slashes||t.slashes,o.href=o.format(),o},s.prototype.parseHost=function(){var t=this.host,e=i.exec(t);e&&(\":\"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,o){(function(t,r){var n;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(s){e&&e.nodeType,t&&t.nodeType;var a=\"object\"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var i,h=2147483647,c=/^xn--/,l=/[^\\x20-\\x7E]/,u=/[\\x2E\\u3002\\uFF0E\\uFF61]/g,p={overflow:\"Overflow: input needs wider integers to process\",\"not-basic\":\"Illegal input >= 0x80 (not a basic code point)\",\"invalid-input\":\"Invalid input\"},f=Math.floor,m=String.fromCharCode;function d(t){throw new RangeError(p[t])}function g(t,e){for(var o=t.length,r=[];o--;)r[o]=e(t[o]);return r}function y(t,e){var o=t.split(\"@\"),r=\"\";return o.length>1&&(r=o[0]+\"@\",t=o[1]),r+g((t=t.replace(u,\".\")).split(\".\"),e).join(\".\")}function v(t){for(var e,o,r=[],n=0,s=t.length;n<s;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<s?56320==(64512&(o=t.charCodeAt(n++)))?r.push(((1023&e)<<10)+(1023&o)+65536):(r.push(e),n--):r.push(e);return r}function w(t){return g(t,(function(t){var e=\"\";return t>65535&&(e+=m((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=m(t)})).join(\"\")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function A(t,e,o){var r=0;for(t=o?f(t/700):t>>1,t+=f(t/e);t>455;r+=36)t=f(t/35);return f(r+36*t/(t+38))}function j(t){var e,o,r,n,s,a,i,c,l,u,p,m=[],g=t.length,y=0,v=128,b=72;for((o=t.lastIndexOf(\"-\"))<0&&(o=0),r=0;r<o;++r)t.charCodeAt(r)>=128&&d(\"not-basic\"),m.push(t.charCodeAt(r));for(n=o>0?o+1:0;n<g;){for(s=y,a=1,i=36;n>=g&&d(\"invalid-input\"),((c=(p=t.charCodeAt(n++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:36)>=36||c>f((h-y)/a))&&d(\"overflow\"),y+=c*a,!(c<(l=i<=b?1:i>=b+26?26:i-b));i+=36)a>f(h/(u=36-l))&&d(\"overflow\"),a*=u;b=A(y-s,e=m.length+1,0==s),f(y/e)>h-v&&d(\"overflow\"),v+=f(y/e),y%=e,m.splice(y++,0,v)}return w(m)}function x(t){var e,o,r,n,s,a,i,c,l,u,p,g,y,w,j,x=[];for(g=(t=v(t)).length,e=128,o=0,s=72,a=0;a<g;++a)(p=t[a])<128&&x.push(m(p));for(r=n=x.length,n&&x.push(\"-\");r<g;){for(i=h,a=0;a<g;++a)(p=t[a])>=e&&p<i&&(i=p);for(i-e>f((h-o)/(y=r+1))&&d(\"overflow\"),o+=(i-e)*y,e=i,a=0;a<g;++a)if((p=t[a])<e&&++o>h&&d(\"overflow\"),p==e){for(c=o,l=36;!(c<(u=l<=s?1:l>=s+26?26:l-s));l+=36)j=c-u,w=36-u,x.push(m(b(u+j%w,0))),c=f(j/w);x.push(m(b(c,0))),s=A(o,y,r==n),o=0,++r}++o,++e}return x.join(\"\")}i={version:\"1.4.1\",ucs2:{decode:v,encode:w},decode:j,encode:x,toASCII:function(t){return y(t,(function(t){return l.test(t)?\"xn--\"+x(t):t}))},toUnicode:function(t){return y(t,(function(t){return c.test(t)?j(t.slice(4).toLowerCase()):t}))}},void 0===(n=function(){return i}.call(e,o,e,t))||(t.exports=n)}()}).call(this,o(20)(t),o(21))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,\"loaded\",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,\"id\",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var o;o=function(){return this}();try{o=o||new Function(\"return this\")()}catch(t){\"object\"==typeof window&&(o=window)}t.exports=o},function(t,e,o){\"use strict\";t.exports={isString:function(t){return\"string\"==typeof t},isObject:function(t){return\"object\"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,o){\"use strict\";e.decode=e.parse=o(24),e.encode=e.stringify=o(25)},function(t,e,o){\"use strict\";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,o,s){e=e||\"&\",o=o||\"=\";var a={};if(\"string\"!=typeof t||0===t.length)return a;var i=/\\+/g;t=t.split(e);var h=1e3;s&&\"number\"==typeof s.maxKeys&&(h=s.maxKeys);var c=t.length;h>0&&c>h&&(c=h);for(var l=0;l<c;++l){var u,p,f,m,d=t[l].replace(i,\"%20\"),g=d.indexOf(o);g>=0?(u=d.substr(0,g),p=d.substr(g+1)):(u=d,p=\"\"),f=decodeURIComponent(u),m=decodeURIComponent(p),r(a,f)?n(a[f])?a[f].push(m):a[f]=[a[f],m]:a[f]=m}return a};var n=Array.isArray||function(t){return\"[object Array]\"===Object.prototype.toString.call(t)}},function(t,e,o){\"use strict\";var r=function(t){switch(typeof t){case\"string\":return t;case\"boolean\":return t?\"true\":\"false\";case\"number\":return isFinite(t)?t:\"\";default:return\"\"}};t.exports=function(t,e,o,i){return e=e||\"&\",o=o||\"=\",null===t&&(t=void 0),\"object\"==typeof t?s(a(t),(function(a){var i=encodeURIComponent(r(a))+o;return n(t[a])?s(t[a],(function(t){return i+encodeURIComponent(r(t))})).join(e):i+encodeURIComponent(r(t[a]))})).join(e):i?encodeURIComponent(r(i))+o+encodeURIComponent(r(t)):\"\"};var n=Array.isArray||function(t){return\"[object Array]\"===Object.prototype.toString.call(t)};function s(t,e){if(t.map)return t.map(e);for(var o=[],r=0;r<t.length;r++)o.push(e(t[r],r));return o}var a=Object.keys||function(t){var e=[];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.push(o);return e}},function(t,e,o){\"use strict\";o.r(e),o.d(e,\"handleCors\",(function(){return r})),o.d(e,\"wrapCorsHeader\",(function(){return n}));const r=(t={})=>e=>{const{origin:o=\"*\",methods:r=\"GET, POST, PATCH, DELETE\",headers:n=\"authorization, referer, origin, content-type\",maxAge:s=null,allowCredentials:a=!0}=t;if(null!==e.headers.get(\"Origin\")&&null!==e.headers.get(\"Access-Control-Request-Method\")){const t={\"Access-Control-Allow-Origin\":o,\"Access-Control-Allow-Methods\":r,\"Access-Control-Allow-Headers\":n};return a&&(t[\"Access-Control-Allow-Credentials\"]=\"true\"),s&&(t[\"Access-Control-Max-Age\"]=s),new Response(null,{status:204,headers:t})}return new Response(null,{headers:{Allow:r+\", HEAD, OPTIONS\"}})},n=(t,e={})=>{const{origin:o=\"*\"}=e;return t.headers.set(\"Access-Control-Allow-Origin\",o),t}},function(t,e){class o{static parse(t){return new Uint8Array(Array.prototype.map.call(atob(t.replace(/-/g,\"+\").replace(/_/g,\"/\").replace(/\\s/g,\"\")),t=>t.charCodeAt(0)))}static stringify(t){return btoa(String.fromCharCode.apply(0,t)).replace(/=/g,\"\").replace(/\\+/g,\"-\").replace(/\\//g,\"_\")}}t.exports=new class{constructor(){if(!crypto||!crypto.subtle)throw new Error(\"Crypto not supported!\");this.algorithms={ES256:{name:\"ECDSA\",namedCurve:\"P-256\",hash:{name:\"SHA-256\"}},ES384:{name:\"ECDSA\",namedCurve:\"P-384\",hash:{name:\"SHA-384\"}},ES512:{name:\"ECDSA\",namedCurve:\"P-512\",hash:{name:\"SHA-512\"}},HS256:{name:\"HMAC\",hash:{name:\"SHA-256\"}},HS384:{name:\"HMAC\",hash:{name:\"SHA-384\"}},HS512:{name:\"HMAC\",hash:{name:\"SHA-512\"}}}}_utf8ToUint8Array(t){return o.parse(btoa(unescape(encodeURIComponent(t))))}_str2ab(t){const e=new ArrayBuffer(t.length),o=new Uint8Array(e);for(let e=0,r=t.length;e<r;e++)o[e]=t.charCodeAt(e);return e}_decodePayload(t){switch(t.length%4){case 0:break;case 2:t+=\"==\";break;case 3:t+=\"=\";break;default:throw new Error(\"Illegal base64url string!\")}try{return JSON.parse(decodeURIComponent(escape(atob(t))))}catch{return null}}async sign(t,e,r={algorithm:\"HS256\"}){if(\"string\"==typeof r&&(r={algorithm:r}),null===t||\"object\"!=typeof t)throw new Error(\"payload must be an object\");if(\"string\"!=typeof e)throw new Error(\"secret must be a string\");if(\"string\"!=typeof r.algorithm)throw new Error(\"options.algorithm must be a string\");const n=this.algorithms[r.algorithm];if(!n)throw new Error(\"algorithm not found\");t.iat=Math.floor(Date.now()/1e3);const s=JSON.stringify(t),a=`${o.stringify(this._utf8ToUint8Array(JSON.stringify({alg:r.algorithm,kid:r.keyid})))}.${o.stringify(this._utf8ToUint8Array(s))}`;let i,h=\"raw\";e.startsWith(\"-----BEGIN\")?(h=\"pkcs8\",i=this._str2ab(atob(e.replace(/-----BEGIN.*?-----/g,\"\").replace(/-----END.*?-----/g,\"\").replace(/\\s/g,\"\")))):i=this._utf8ToUint8Array(e);const c=await crypto.subtle.importKey(h,i,n,!1,[\"sign\"]),l=await crypto.subtle.sign(n,c,this._utf8ToUint8Array(a));return`${a}.${o.stringify(new Uint8Array(l))}`}async verify(t,e,r={algorithm:\"HS256\"}){if(\"string\"==typeof r&&(r={algorithm:r}),\"string\"!=typeof t)throw new Error(\"token must be a string\");if(\"string\"!=typeof e)throw new Error(\"secret must be a string\");if(\"string\"!=typeof r.algorithm)throw new Error(\"options.algorithm must be a string\");const n=t.split(\".\");if(3!==n.length)throw new Error(\"token must consist of 3 parts\");const s=this.algorithms[r.algorithm];if(!s)throw new Error(\"algorithm not found\");const a=this.decode(t);if(a.nbf&&a.nbf>=Math.floor(Date.now()/1e3))return!1;if(a.exp&&a.exp<Math.floor(Date.now()/1e3))return!1;let i,h=\"raw\";e.startsWith(\"-----BEGIN\")?(h=\"pkcs8\",i=this._str2ab(atob(e.replace(/-----BEGIN.*?-----/g,\"\").replace(/-----END.*?-----/g,\"\").replace(/\\s/g,\"\")))):i=this._utf8ToUint8Array(e);const c=await crypto.subtle.importKey(h,i,s,!1,[\"sign\"]),l=await crypto.subtle.sign(s,c,this._utf8ToUint8Array(n.slice(0,2).join(\".\")));return o.stringify(new Uint8Array(l))===n[2]}decode(t){return this._decodePayload(t.split(\".\")[1].replace(/-/g,\"+\").replace(/_/g,\"/\"))}}}]);","extractedComments":[]}